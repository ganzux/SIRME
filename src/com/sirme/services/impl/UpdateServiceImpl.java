package com.sirme.services.impl;

import java.util.Date;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Service;

import com.sirme.services.IUpdatedService;
import com.sirme.util.MyLogger;
import com.sirme.util.SpringConstants;

@Service( SpringConstants.UPDATED_SERVICE)
public class UpdateServiceImpl implements IUpdatedService{

	///////////////////////////////////////////////////////////////
	//                         Atributos                         //
	///////////////////////////////////////////////////////////////

	private static Logger log = LoggerFactory.getLogger( UpdateServiceImpl.class );
	private static final String CLASS_NAME = "UpdateServiceImpl";
	
	private static Date lastUpdate;;

	///////////////////////////////////////////////////////////////
	//                    Fin de los Atributos                   //
	///////////////////////////////////////////////////////////////



	///////////////////////////////////////////////////////////////
	//                       Constructores                       //
	///////////////////////////////////////////////////////////////

	public UpdateServiceImpl(){
		MyLogger.info(log, CLASS_NAME, "UpdateServiceImpl", "New Instance");
		lastUpdate = new Date();
	}
	
	///////////////////////////////////////////////////////////////
	//                  Fin de los Constructores                 //
	///////////////////////////////////////////////////////////////



	///////////////////////////////////////////////////////////////
	//                      Métodos Públicos                     //
	///////////////////////////////////////////////////////////////

	@Override
	public boolean isUpdated(Date date) {
		if ( date == null )
			return false;
		if ( lastUpdate == null )
			return true;
		
		return lastUpdate.before( date );
	}
	
	@Override
	public void refreshDate(){
		lastUpdate = new Date();
	}
	
	///////////////////////////////////////////////////////////////
	//                 Fin de los Métodos Públicos               //
	///////////////////////////////////////////////////////////////


	///////////////////////////////////////////////////////////////
	//                      Métodos Privados                     //
	///////////////////////////////////////////////////////////////

	///////////////////////////////////////////////////////////////
	//                 Fin de los Métodos Privados               //
	///////////////////////////////////////////////////////////////
}
